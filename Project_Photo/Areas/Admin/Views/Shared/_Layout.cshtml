<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewBag.Title - 管理後台</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.8/css/bootstrap.min.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@@tabler/core@1.4.0/dist/css/tabler.min.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@@tabler/icons-webfont@latest/tabler-icons.min.css">
    <style>
        /* 固定導覽列 */
        .admin-navbar {
            position: sticky;
            top: 0;
            z-index: 1030;
            background-color: #fff;
            box-shadow: 0 1px 2px 0 rgba(0,0,0,.05);
        }

        .admin-navbar-menu {
            position: sticky;
            top: 57px;
            z-index: 1029;
            background-color: #fff;
            border-bottom: 1px solid #e6e7e9;
        }

        .page-wrapper {
            padding-top: 0;
        }

        /* 系統統計卡片樣式 */
        .system-stat-item {
            padding: 0.75rem 1rem;
            border-bottom: 1px solid rgba(0,0,0,.05);
        }

            .system-stat-item:last-child {
                border-bottom: none;
            }

            .system-stat-item:hover {
                background-color: rgba(0,0,0,.02);
            }

        /* 系統 badge 樣式 */
        .system-badge {
            font-size: 0.75rem;
            padding: 0.35rem 0.65rem;
            font-weight: 600;
        }
    </style>
    @RenderSection("Styles", required: false)
</head>
<body>
    <div class="page">
        <!-- 頂部導覽列 -->
        <header class="navbar navbar-expand-md navbar-light d-print-none admin-navbar">
            <div class="container-xl">
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#admin-navbar-menu">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <h1 class="navbar-brand navbar-brand-autodark d-none-navbar-horizontal pe-0 pe-md-3">
                    <a href="@Url.Action("Index", "Dashboard", new { area = "Admin" })">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icon-tabler-dashboard">
                            <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                            <path d="M12 13m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0" />
                            <path d="M13.45 11.55l2.05 -2.05" />
                            <path d="M6.4 20a9 9 0 1 1 11.2 0z" />
                        </svg>
                        管理後台
                    </a>
                </h1>
                <div class="navbar-nav flex-row order-md-last">
                    <div class="nav-item dropdown">
                        <a href="#" class="nav-link d-flex lh-1 text-reset p-0" data-bs-toggle="dropdown">
                            <span class="avatar avatar-sm">
                                <i class="ti ti-user"></i>
                            </span>
                            <div class="d-none d-xl-block ps-2">
                                <div>@(Context.Session.GetString("DisplayName") ?? Context.Session.GetString("Account"))</div>
                                <div class="mt-1 small text-muted">超級管理員</div>
                            </div>
                        </a>
                        <div class="dropdown-menu dropdown-menu-end dropdown-menu-arrow">
                            <a href="/" class="dropdown-item">
                                <i class="ti ti-home me-2"></i>
                                回到主頁首頁
                            </a>
                            <div class="dropdown-divider"></div>
                            <a href="@Url.Action("Logout", "UserSessions", new { area = "" })" class="dropdown-item text-danger">
                                <i class="ti ti-logout me-2"></i>
                                登出
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </header>

        <!-- 次級導覽列 -->
        <div class="navbar-expand-md admin-navbar-menu">
            <div class="collapse navbar-collapse" id="admin-navbar-menu">
                <div class="navbar navbar-light">
                    <div class="container-xl">
                        <ul class="navbar-nav">
                            <li class="nav-item @(ViewContext.RouteData.Values["action"]?.ToString() == "Index" && ViewContext.RouteData.Values["controller"]?.ToString() == "Dashboard" ? "active" : "")">
                                <a class="nav-link" href="@Url.Action("Index", "Dashboard", new { area = "Admin" })">
                                    <span class="nav-link-icon d-md-none d-lg-inline-block">
                                        <i class="ti ti-home"></i>
                                    </span>
                                    <span class="nav-link-title">儀表板</span>
                                </a>
                            </li>
                            <li class="nav-item @(ViewContext.RouteData.Values["controller"]?.ToString() == "UserManagement" ? "active" : "")">
                                <a class="nav-link" href="@Url.Action("Index", "UserManagement", new { area = "Admin" })">
                                    <span class="nav-link-icon d-md-none d-lg-inline-block">
                                        <i class="ti ti-users"></i>
                                    </span>
                                    <span class="nav-link-title">用戶管理</span>
                                </a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <!-- 主要內容區 -->
        <div class="page-wrapper">
            @RenderBody()
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"></script>
    @RenderSection("Scripts", required: false)
</body>
</html>