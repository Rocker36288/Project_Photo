@using Project_Photo.Areas.Admin.ViewModels.User
@model UserCreateViewModel
@{
    ViewData["Title"] = "新增用戶";
}

@section Styles {
    <style>
        /* 自訂下拉選單圓弧邊框 */
        .form-select.rounded-3 {
            border-radius: 0.5rem !important;
        }

        /* 如果要讓所有 select 都是圓弧邊框,取消下面的註解 */
        /*
                .form-select {
                    border-radius: 0.5rem !important;
                }
                */
    </style>
}

<div class="page-header d-print-none">
    <div class="container-xl">
        <div class="row g-2 align-items-center">
            <div class="col">
                <div class="page-pretitle">
                    用戶管理
                </div>
                <h2 class="page-title">
                    新增用戶
                </h2>
            </div>
            <div class="col-auto ms-auto d-print-none">
                <div class="btn-list">
                    <a asp-action="Index" class="btn btn-secondary">
                        <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none" /><path d="M9 11l-4 4l4 4m-4 -4h11a4 4 0 0 0 0 -8h-1" /></svg>
                        返回列表
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="page-body">
    <div class="container-xl">
        <form asp-action="Create" method="post">
            <div class="row row-cards">

                <!-- 帳號資訊 Card -->
                <div class="col-12">
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">帳號資訊 (必填)</h3>
                        </div>
                        <div class="card-body">
                            <div asp-validation-summary="ModelOnly" class="alert alert-danger" role="alert"></div>

                            <div class="row">
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label asp-for="Account" class="form-label required">帳號</label>
                                        <input asp-for="Account" class="form-control" placeholder="請輸入帳號" />
                                        <span asp-validation-for="Account" class="text-danger"></span>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label asp-for="Email" class="form-label required">Email</label>
                                        <input asp-for="Email" class="form-control" type="email" placeholder="請輸入Email" />
                                        <span asp-validation-for="Email" class="text-danger"></span>
                                    </div>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label asp-for="Password" class="form-label required">密碼</label>
                                        <div class="input-group input-group-flat">
                                            <input asp-for="Password" type="password" class="form-control" placeholder="請輸入密碼 (6-255字元)" autocomplete="new-password" id="password" />
                                            <span class="input-group-text">
                                                <a href="#" class="link-secondary" title="顯示密碼" data-bs-toggle="tooltip" id="togglePassword">
                                                    <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none" /><circle cx="12" cy="12" r="2" /><path d="M22 12c-2.667 4.667 -6 7 -10 7s-7.333 -2.333 -10 -7c2.667 -4.667 6 -7 10 -7s7.333 2.333 10 7" /></svg>
                                                </a>
                                            </span>
                                        </div>
                                        <span asp-validation-for="Password" class="text-danger"></span>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label asp-for="ConfirmPassword" class="form-label required">確認密碼</label>
                                        <input asp-for="ConfirmPassword" type="password" class="form-control" placeholder="請再次輸入密碼" autocomplete="new-password" />
                                        <span asp-validation-for="ConfirmPassword" class="text-danger"></span>
                                    </div>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label asp-for="Phone" class="form-label">手機號碼</label>
                                        <input asp-for="Phone" class="form-control" placeholder="請輸入手機號碼" />
                                        <span asp-validation-for="Phone" class="text-danger"></span>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label asp-for="AccountType" class="form-label required">帳號類型</label>
                                        <select asp-for="AccountType" class="form-select">
                                            <option value="Email">Email</option>
                                            <option value="Google">Google</option>
                                            <option value="Facebook">Facebook</option>
                                            <option value="Apple">Apple</option>
                                        </select>
                                        <span asp-validation-for="AccountType" class="text-danger"></span>
                                    </div>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label asp-for="RegistrationSource" class="form-label">註冊來源</label>
                                        <select asp-for="RegistrationSource" class="form-select rounded-3">
                                            <option value="">請選擇</option>
                                            <option value="Web">Web</option>
                                            <option value="iOS">iOS</option>
                                            <option value="Android">Android</option>
                                        </select>
                                        <span asp-validation-for="RegistrationSource" class="text-danger"></span>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label asp-for="AccountStatus" class="form-label required">帳號狀態</label>
                                        <select asp-for="AccountStatus" class="form-select">
                                            <option value="Active">啟用中</option>
                                            <option value="Inactive">未啟用</option>
                                            <option value="Suspended">已停用</option>
                                        </select>
                                        <span asp-validation-for="AccountStatus" class="text-danger"></span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 公開個人資料 Card -->
                <div class="col-12">
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">公開個人資料 (選填)</h3>
                        </div>
                        <div class="card-body">
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label asp-for="DisplayName" class="form-label">顯示名稱</label>
                                        <input asp-for="DisplayName" class="form-control" placeholder="公開顯示的名稱" />
                                        <span asp-validation-for="DisplayName" class="text-danger"></span>
                                        <small class="form-hint">此名稱將會公開顯示</small>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label asp-for="Location" class="form-label">所在地</label>
                                        <input asp-for="Location" class="form-control" placeholder="例如: 台北市" />
                                        <span asp-validation-for="Location" class="text-danger"></span>
                                    </div>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label asp-for="Avatar" class="form-label">頭像URL</label>
                                        <input asp-for="Avatar" class="form-control" placeholder="頭像圖片路徑" />
                                        <span asp-validation-for="Avatar" class="text-danger"></span>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label asp-for="CoverImage" class="form-label">封面圖URL</label>
                                        <input asp-for="CoverImage" class="form-control" placeholder="封面圖片路徑" />
                                        <span asp-validation-for="CoverImage" class="text-danger"></span>
                                    </div>
                                </div>
                            </div>

                            <div class="mb-3">
                                <label asp-for="Website" class="form-label">個人網站</label>
                                <input asp-for="Website" class="form-control" type="url" placeholder="https://example.com" />
                                <span asp-validation-for="Website" class="text-danger"></span>
                            </div>

                            <div class="mb-3">
                                <label asp-for="Bio" class="form-label">個人簡介</label>
                                <textarea asp-for="Bio" class="form-control" rows="4" placeholder="請輸入個人簡介"></textarea>
                                <span asp-validation-for="Bio" class="text-danger"></span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 私人資料 Card -->
                <div class="col-12">
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">私人資料 (選填)</h3>
                        </div>
                        <div class="card-body">
                            <div class="row">
                                <div class="col-md-4">
                                    <div class="mb-3">
                                        <label asp-for="RealName" class="form-label">真實姓名</label>
                                        <input asp-for="RealName" class="form-control" placeholder="請輸入真實姓名" />
                                        <span asp-validation-for="RealName" class="text-danger"></span>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="mb-3">
                                        <label asp-for="Gender" class="form-label">性別</label>
                                        <select asp-for="Gender" class="form-select">
                                            <option value="">請選擇</option>
                                            <option value="Male">男性</option>
                                            <option value="Female">女性</option>
                                            <option value="Other">其他</option>
                                            <option value="PreferNotToSay">不願透露</option>
                                        </select>
                                        <span asp-validation-for="Gender" class="text-danger"></span>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="mb-3">
                                        <label asp-for="BirthDate" class="form-label">生日日期</label>
                                        <input asp-for="BirthDate" class="form-control" type="date" />
                                        <span asp-validation-for="BirthDate" class="text-danger"></span>
                                    </div>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-md-4">
                                    <div class="mb-3">
                                        <label asp-for="IdNumber" class="form-label">身分證字號</label>
                                        <input asp-for="IdNumber" class="form-control" placeholder="請輸入身分證字號" />
                                        <span asp-validation-for="IdNumber" class="text-danger"></span>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="mb-3">
                                        <label asp-for="Country" class="form-label">國家</label>
                                        <input asp-for="Country" class="form-control" placeholder="例如: 台灣" />
                                        <span asp-validation-for="Country" class="text-danger"></span>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="mb-3">
                                        <label asp-for="City" class="form-label">城市</label>
                                        <input asp-for="City" class="form-control" placeholder="例如: 台北市" />
                                        <span asp-validation-for="City" class="text-danger"></span>
                                    </div>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-md-8">
                                    <div class="mb-3">
                                        <label asp-for="FullAddress" class="form-label">完整地址</label>
                                        <input asp-for="FullAddress" class="form-control" placeholder="請輸入完整地址" />
                                        <span asp-validation-for="FullAddress" class="text-danger"></span>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="mb-3">
                                        <label asp-for="PostalCode" class="form-label">郵遞區號</label>
                                        <input asp-for="PostalCode" class="form-control" placeholder="例如: 100" />
                                        <span asp-validation-for="PostalCode" class="text-danger"></span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 提交按鈕 -->
                <div class="col-12">
                    <div class="card">
                        <div class="card-footer text-end">
                            <div class="d-flex">
                                <a asp-action="Index" class="btn btn-link">取消</a>
                                <button type="submit" class="btn btn-primary ms-auto">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none" /><line x1="12" y1="5" x2="12" y2="19" /><line x1="5" y1="12" x2="19" y2="12" /></svg>
                                    建立用戶
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </form>
    </div>
</div>

@section Scripts {
    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
    }
    <script>
        // 密碼顯示/隱藏切換
        document.getElementById('togglePassword')?.addEventListener('click', function (e) {
            e.preventDefault();
            const password = document.getElementById('password');
            const type = password.getAttribute('type') === 'password' ? 'text' : 'password';
            password.setAttribute('type', type);

            // 切換圖示
            const svg = this.querySelector('svg');
            if (type === 'password') {
                svg.innerHTML = '<path stroke="none" d="M0 0h24v24H0z" fill="none"/><circle cx="12" cy="12" r="2" /><path d="M22 12c-2.667 4.667 -6 7 -10 7s-7.333 -2.333 -10 -7c2.667 -4.667 6 -7 10 -7s7.333 2.333 10 7" />';
            } else {
                svg.innerHTML = '<path stroke="none" d="M0 0h24v24H0z" fill="none"/><line x1="3" y1="3" x2="21" y2="21" /><path d="M10.584 10.587a2 2 0 0 0 2.828 2.83" /><path d="M9.363 5.365a9.466 9.466 0 0 1 2.637 -.365c4 0 7.333 2.333 10 7c-.778 1.361 -1.612 2.524 -2.503 3.488m-2.14 1.861c-1.631 1.1 -3.415 1.651 -5.357 1.651c-4 0 -7.333 -2.333 -10 -7c1.369 -2.395 2.913 -4.175 4.632 -5.341" />';
            }
        });
    </script>
}